<?xml version="1.0"?>
<!DOCTYPE cache-config SYSTEM "cache-config.dtd">

<!--<cache-config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xmlns="http://xmlns.oracle.com/coherence/coherence-cache-config"
              xsi:schemaLocation="http://xmlns.oracle.com/coherence/coherence-cache-config coherence-cache-config.xsd"> -->
<cache-config>              
   <caching-scheme-mapping>
	<cache-mapping>
         <cache-name>Customer</cache-name>
         <scheme-name>toplink-distributed</scheme-name>
      </cache-mapping>

	<cache-mapping>
         <cache-name>West-*</cache-name>
         <scheme-name>remote-publish-distributed</scheme-name>
      </cache-mapping>

      <cache-mapping>
         <cache-name>East-*</cache-name>
         <scheme-name>remote-distributed</scheme-name>
      </cache-mapping>
      
      <cache-mapping>
        <cache-name>AvroCustomerCache</cache-name>
        <scheme-name>AvroCustomerCacheScheme</scheme-name>
      </cache-mapping>

      <cache-mapping>
         <cache-name>*</cache-name>
         <scheme-name>basic-distributed</scheme-name>
      </cache-mapping> 
   </caching-scheme-mapping>

   <caching-schemes>
      <distributed-scheme>
        <scheme-name>toplink-distributed</scheme-name>
		<service-name>RemotePublishDistributedCache</service-name>
		<serializer>
           <class-name>com.tangosol.io.pof.ConfigurablePofContext</class-name>
            <init-params>
              <init-param>
                <param-value>META-INF/datagrid-pof-config.xml</param-value>
                <param-type>String</param-type>
              </init-param>
            </init-params>
		</serializer> 
		<backing-map-scheme>
        	<read-write-backing-map-scheme>
          		<internal-cache-scheme>
            			<local-scheme>
					<eviction-policy>LRU</eviction-policy>
	                	        <high-units>1</high-units>
        	               		<unit-calculator>BINARY</unit-calculator>
                	       	 	<unit-factor>1</unit-factor>
        			</local-scheme>
          		</internal-cache-scheme>
          		<cachestore-scheme>
            		<class-scheme>
            		<!-- <class-name>com.tangosol.coherence.hibernate.HibernateCacheStore</class-name>  -->	
              			<class-name>oracle.eclipselink.coherence.standalone.EclipseLinkJPACacheStore</class-name>
              			<init-params>
                			<init-param>
                				<param-type>java.lang.String</param-type>
                				<param-value>{cache-name}</param-value>
                			</init-param>
              				<init-param>
                  				<param-type>java.lang.String</param-type>
                  				<param-value>TelecomDB</param-value>
                			</init-param>
              			</init-params>
            		</class-scheme>
          		</cachestore-scheme>
          		<write-delay>5s</write-delay>
          		<write-batch-factor>0.75</write-batch-factor>
                        <write-requeue-threshold>10</write-requeue-threshold>
        	</read-write-backing-map-scheme>
      	</backing-map-scheme>
      	<autostart>true</autostart>
     </distributed-scheme>

    <distributed-scheme>
        <scheme-name>remote-publish-distributed</scheme-name>
                <service-name>RemotePublishDistributedCache</service-name>
                <serializer>
           	<class-name>com.tangosol.io.pof.ConfigurablePofContext</class-name>
            	<init-params>
              		<init-param>
                		<param-value>META-INF/datagrid-pof-config.xml</param-value>
                		<param-type>String</param-type>
              		</init-param>
            	</init-params>
                </serializer>
                <backing-map-scheme>
                <read-write-backing-map-scheme>
                        <internal-cache-scheme>
                                <local-scheme>
                                </local-scheme>
                        </internal-cache-scheme>
                        <cachestore-scheme>
                        	<class-scheme>
                                	<class-name>com.oracle.datagrid.activeactive.util.RemoteReplicatorCacheStore</class-name>
                                <init-params>
                                        <init-param>
                                                <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
                                                <param-value>{manager-context}</param-value>
                                        </init-param>
                                        <init-param>
                				<param-type>java.lang.String</param-type>
                				<param-value>{cache-name}</param-value>
                			</init-param>
                                </init-params>
                        	</class-scheme>
                        </cachestore-scheme>
                </read-write-backing-map-scheme>
        </backing-map-scheme>
        <autostart>true</autostart>
     </distributed-scheme>

	 <remote-cache-scheme>
        	<scheme-name>remote-distributed</scheme-name>
         	<service-name>RemoteTcpCacheService</service-name>
         	<initiator-config>
            		<tcp-initiator>
               			<remote-addresses>
                  			<socket-address>
                                            <address>fmw01-wls-1.compute-usoracleco44777.oraclecloud.internal</address>
                                            <port>9098</port>
                                        </socket-address>
                  			<socket-address>
                                            <address>fmw01-wls-1.compute-usoracleco44777.oraclecloud.internal</address>
                                            <port>9099</port>
                  			</socket-address>
               			</remote-addresses>
               			<connect-timeout>10s</connect-timeout>
            		</tcp-initiator>
            		<outgoing-message-handler>
               			<request-timeout>30s</request-timeout>
            		</outgoing-message-handler>
            		<serializer>	
            			<class-name>com.tangosol.io.pof.ConfigurablePofContext</class-name>
           			<init-params>
					<init-param>
						<param-type>String</param-type>
						<param-value>META-INF/datagrid-pof-config.xml</param-value>
					</init-param>
				</init-params>
	    		</serializer>
         	</initiator-config>
      	</remote-cache-scheme>

      <distributed-scheme>
        <scheme-name>basic-distributed</scheme-name>
		<service-name>BasicDistributedCache</service-name>
		<serializer>
            <class-name>com.tangosol.io.pof.ConfigurablePofContext</class-name>
            <init-params>
              <init-param>
                <param-value>META-INF/datagrid-pof-config.xml</param-value>
                <param-type>String</param-type>
              </init-param>
            </init-params>
		</serializer> 
		<backing-map-scheme>
        	<local-scheme></local-scheme>
      	</backing-map-scheme>
      	<autostart>true</autostart>
     </distributed-scheme>

        <remote-invocation-scheme>       
		<scheme-name>extend-invocation</scheme-name>
		<service-name>InvocationService</service-name>       
		<initiator-config>         
			<tcp-initiator>           
				<remote-addresses>             
					<socket-address>               
						<address>fmw01-wls-1.compute-usoracleco44777.oraclecloud.internal</address>               
						<port>9098</port>             
					</socket-address>
					<socket-address>
                                            <address>fmw01-wls-1.compute-usoracleco44777.oraclecloud.internal</address>
                                            <port>9099</port>
                                        </socket-address>           
				</remote-addresses>           
				<connect-timeout>10s</connect-timeout>         
			</tcp-initiator>         
			<outgoing-message-handler>           
				<request-timeout>30s</request-timeout>         
			</outgoing-message-handler>       
		</initiator-config>     
	</remote-invocation-scheme>   

<!--		
	<invocation-scheme>
                <scheme-name>local-invocation-service</scheme-name>
                <service-name>InvocationService</service-name>
                <autostart>true</autostart>
        </invocation-scheme> -->

	<proxy-scheme>
    	<service-name>DataGridProxyService</service-name>
        <thread-count>20</thread-count>
        <acceptor-config>
        	<tcp-acceptor>
            	<local-address>
                	<address>fmw02-wls-1</address>
                	<port>9098</port>
               </local-address>
            </tcp-acceptor>
         </acceptor-config>
         <autostart>true</autostart>
      </proxy-scheme>
   </caching-schemes>
</cache-config>